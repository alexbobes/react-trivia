(this.webpackJsonptrivia=this.webpackJsonptrivia||[]).push([[0],{70:function(e,t,a){e.exports=a(95)},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t){e.exports="data:image/png;base64,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"},95:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(18),i=a.n(s),c=(a(75),a(76),a(61)),o=a(7);var l=function(){return r.a.createElement("h1",{className:"header"},"Answer IT.")},u=a(57),m=a.n(u);var h=function(){return r.a.createElement("div",{className:"footer"},r.a.createElement("div",null,r.a.createElement("a",{href:"https://creativecommons.org/licenses/by-sa/4.0/",target:"_blank"},r.a.createElement("img",{src:a(77),alt:"creative commons"})),r.a.createElement("a",{href:"https://opentdb.com/",target:"_blank"},"Credit")),r.a.createElement("p",{className:"made-by"},"Made with",r.a.createElement("span",null,r.a.createElement(m.a,{style:{color:"red",transform:"scale(0.8)"}},"favorite")),"by ",r.a.createElement("a",{href:"https://github.com/matiascfgm",target:"_blank"},"Matias Kupfer")))},d=a(37),v=a(31),p=a.n(v),g=a(46),f=a(26),b=a(27),A=a(22),y=a(30),E=a(28),w=a(119),O=a(120),j=[{name:"General Knowledge",num:9},{name:"Books",num:10},{name:"Film",num:11},{name:"Music",num:12},{name:"Television",num:14},{name:"Videogames",num:15},{name:"Science & nature",num:17},{name:"Sports",num:21},{name:"Geography",num:22},{name:"History",num:23},{name:"Celebrities",num:26},{name:"Vehicles",num:28}],C="https://us-central1-trivia-e9cfe.cloudfunctions.net/api",k=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(f.a)(this,a),(e=t.call(this)).state={loader:!1,snackbarMessage:null,username:"react",gameId:"reactGameID",gamePassword:"1234",selectedCategory:9,categories:j},e.createGame=e.createGame.bind(Object(A.a)(e)),e.handleChange=e.handleChange.bind(Object(A.a)(e)),e}return Object(b.a)(a,[{key:"createGame",value:function(){var e=Object(g.a)(p.a.mark((function e(t,a){var n,r,s,i,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),n=this.state.selectedCategory,this.setState({loader:!0}),"https://cors-anywhere.herokuapp.com/",r="".concat(C,"/play/"),r=a?"".concat(r,"/createGame/").concat(n,"/").concat(this.state.username,"/").concat(this.state.gameId,"/").concat(this.state.gamePassword):"".concat(r,"/joinGame/").concat(this.state.username,"/").concat(this.state.gameId,"/").concat(this.state.gamePassword),e.next=8,fetch("https://cors-anywhere.herokuapp.com/"+r,{method:"POST"});case 8:return s=e.sent,e.next=11,s.json();case 11:(i=e.sent).success?(c="".concat("/react-trivia","/game/").concat(this.state.username,"/").concat(this.state.gameId,"/").concat(this.state.gamePassword),this.props.history.push(c)):this.setState({message:i.message});case 13:case"end":return e.stop()}}),e,this)})));return function(t,a){return e.apply(this,arguments)}}()},{key:"joinGame",value:function(e){e.preventDefault(),this.createGame(e,!1)}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(d.a)({},a,n))}},{key:"snackBar",value:function(){var e=this;return r.a.createElement(w.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:!0,autoHideDuration:2e3,message:this.state.message,onClose:function(){return e.setState({message:null})},action:r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{color:"secondary",size:"small"},"Close"))})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"lobby"},r.a.createElement("h3",null,"Lobby"),r.a.createElement("input",{type:"text",name:"username",value:this.state.username,placeholder:"Username",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"gameId",value:this.state.gameId,placeholder:"Game name",onChange:this.handleChange}),r.a.createElement("input",{type:"text",name:"gamePassword",value:this.state.gamePassword,placeholder:"potato?",onChange:this.handleChange}),r.a.createElement("div",{className:"select"},r.a.createElement("select",{name:"selectedCategory",onChange:this.handleChange,value:this.state.selectedCategory},this.state.categories.map((function(e){return r.a.createElement("option",{value:e.num},e.name)})))),r.a.createElement("br",null),r.a.createElement("div",{className:"buttons-container"},r.a.createElement("span",{className:"start-btn",onClick:function(t){return e.createGame(t,!0)}},"Create game"),r.a.createElement("span",{className:"start-btn",onClick:function(t){return e.createGame(t,!1)}},"Join game")),this.state.message?this.snackBar():null)}}]),a}(r.a.Component),S=a(116),G=a(48);G.initializeApp({apiKey:"AIzaSyD0ZkQeYXgJo-qWMrZDbGW_ouDPuGK7qhY",authDomain:"trivia-e9cfe.firebaseapp.com",databaseURL:"https://trivia-e9cfe.firebaseio.com",appId:"1:514972671228:web:d3d351e33cbefeadf68b79",projectId:"trivia-e9cfe"});var x=G,N=a(115),D=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(){return Object(f.a)(this,a),t.apply(this,arguments)}return Object(b.a)(a,[{key:"showQuestion",value:function(){var e=this.props.triviaQuestion;return r.a.createElement("div",{className:"trivia-card"},r.a.createElement("div",{className:"header",style:{backgroundColor:this.headerColor()}},r.a.createElement("h3",null,"Category: ",e.category),r.a.createElement("h3",null,"Round: ",this.props.round,"/",this.props.totalRounds)),r.a.createElement("div",{className:"padding"},r.a.createElement("h3",null,e.question),this.showAnswers(e.incorrect_answers),r.a.createElement("span",{className:"timer",style:this.props.timer>4?{color:"green"}:{color:"red"}},this.props.timer)),r.a.createElement(N.a,{variant:"determinate",color:"secondary",value:100-10*this.props.timer}))}},{key:"headerColor",value:function(){var e=this.props.triviaQuestion.difficulty;return"easy"===e?"green":"medium"===e?"orange":"red"}},{key:"showAnswers",value:function(e){var t=this;return r.a.createElement("form",{onSubmit:this.props.handleSubmit},e.map((function(e){return r.a.createElement("label",null,r.a.createElement("input",{onChange:t.props.handleRadioChange,type:"radio",name:"selectedAnswer",value:e,key:e}),e,r.a.createElement("br",null))})))}},{key:"render",value:function(){return this.showQuestion()}}]),a}(r.a.Component),P=x.firestore(),I=function(e){Object(y.a)(a,e);var t=Object(E.a)(a);function a(){var e;return Object(f.a)(this,a),(e=t.call(this)).state={loader:!0,snackbarMessage:null,lastRound:0,helperText:null,rightAnswer:null,interval:null,timer:null,params:null,selectedAnswer:null,triviaObject:null,usersData:null},e.startGame=e.startGame.bind(Object(A.a)(e)),e.handleRadioChange=e.handleRadioChange.bind(Object(A.a)(e)),e.handleSubmit=e.handleSubmit.bind(Object(A.a)(e)),e}return Object(b.a)(a,[{key:"componentDidMount",value:function(){var e=this;x.database().ref().child("X").on("value",(function(){}));this.props.match.params;this.setState({params:this.props.match.params},(function(){e.getGameData()}))}},{key:"componentWillUnmount",value:function(){}},{key:"startGame",value:function(){var e=Object(g.a)(p.a.mark((function e(){var t,a,n,r,s;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loader:!0}),t=this.state.params,a=this.state.triviaObject.selectedCategory,n="".concat(C,"/play/startGame/"),n="".concat(n).concat(a,"/").concat(t.username,"/").concat(t.gameId,"/").concat(t.gamePassword),e.next=7,fetch(n,{method:"POST"});case 7:return r=e.sent,e.next=10,r.json();case 10:s=e.sent,this.setState({message:s.message}),s.success,this.setState({message:s.message,loader:!1});case 13:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"getGameData",value:function(){var e=this,t=P.collection("games").doc(this.state.params.gameId);t.onSnapshot((function(t){if(e.state.triviaObject){var a="";e.state.triviaObject.gameStarted!==t.data().gameStarted?(a="Game starts",e.timer()):e.state.triviaObject.gameStarted&&(a="Next question!",e.timer()),e.setState({triviaObject:t.data(),message:a})}else e.setState({triviaObject:t.data(),loader:!1,message:"Joined game"})})),t.collection("players").onSnapshot((function(t){var a=[];t.docs.map((function(e){return a.push(e.data())})),e.setState({usersData:a})}))}},{key:"timer",value:function(){var e=this;this.setState({interval:clearInterval(this.state.interval)}),this.setState({timer:10}),this.setState({interval:setInterval((function(){if(e.setState({timer:e.state.timer-1}),0===e.state.timer){if(e.state.triviaObject.gameFinished)return;e.handleSubmit()}}),1e3)})}},{key:"updateGameData",value:function(){var e=this,t=P.collection("games").doc(this.state.params.gameId),a=x.firestore.FieldValue,n=this.state.triviaObject,r=n.host===this.state.params.username,s=n.round===n.questions.length-1;if(t.collection("players").doc(this.state.params.username).update({playerAnswers:a.arrayUnion(Object(d.a)({},this.state.lastRound,this.state.rightAnswer))}).then((function(){return e.setState({loader:!1})})).catch((function(e){return console.log(e)})),this.setState({lastRound:this.state.lastRound+1}),r){var i=s?0:1;t.update({round:a.increment(i),gameFinished:s}).then((function(){return e.setState({message:"Next question",loader:!1})})).catch((function(e){return console.log(e)}))}}},{key:"snackBar",value:function(){var e=this;return r.a.createElement(w.a,{anchorOrigin:{vertical:"bottom",horizontal:"left"},open:!0,autoHideDuration:2e3,message:this.state.message,onClose:function(){return e.setState({message:null})},action:r.a.createElement(r.a.Fragment,null,r.a.createElement(O.a,{color:"secondary",size:"small"},"Close"))})}},{key:"handleRadioChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(d.a)({},a,n))}},{key:"handleSubmit",value:function(){var e=this;this.setState({helperText:null,loader:!0});var t=this.state.triviaObject;this.state.selectedAnswer===t.questions[t.round].correct_answer?this.setState({correctAnswer:t.questions[t.round].correct_answer,rightAnswer:!0}):this.setState({correctAnswer:t.questions[t.round].correct_answer,rightAnswer:!1}),setTimeout((function(){e.updateGameData()}),3e3)}},{key:"showTriviaCard",value:function(){var e=this.state.triviaObject;return r.a.createElement(D,{key:e.questions[e.round].correct_answer,triviaQuestion:e.questions[e.round],handleRadioChange:this.handleRadioChange,handleSubmit:this.handleSubmit,selectedAnswer:this.state.selectedAnswer,errorText:this.state.errorText,helperText:this.state.helperText,disableButton:this.state.loader,round:this.state.triviaObject.round+1,totalRounds:this.state.triviaObject.questions.length,timer:this.state.timer})}},{key:"showPlayersInfo",value:function(){return r.a.createElement("div",{className:"users-data"},this.state.usersData.map((function(e){var t=0;return e.playerAnswers.map((function(e,a){return!0===e[a]?t++:null})),r.a.createElement("div",null,r.a.createElement("h3",null,e.username),r.a.createElement("span",null,"Points: ",t))})))}},{key:"showPlayersName",value:function(){var e=this;return r.a.createElement("div",null,this.state.triviaObject.players.map((function(t,a){if(a<=e.state.triviaObject.players.length-1)return 0===a?r.a.createElement("h3",null,"\xb7 ",t," \xb7"):r.a.createElement("h3",null,t)})))}},{key:"showAnswer",value:function(){return this.state.rightAnswer?r.a.createElement("h1",{style:{color:"green"}},"Great! ",this.state.correctAnswer," was the correct answer."):r.a.createElement("h1",{style:{color:"red"}},"Bad news... ",this.state.correctAnswer," was the correct answer.")}},{key:"render",value:function(){var e=this;return this.state.loader?r.a.createElement("div",{className:"loader"},r.a.createElement(S.a,{color:"secondary"}),r.a.createElement("br",null),this.state.triviaObject&&this.state.triviaObject.gameStarted?this.showAnswer():null):this.state.triviaObject&&this.state.triviaObject.questions&&this.state.usersData?this.state.triviaObject.gameFinished?r.a.createElement("div",{className:"game"},r.a.createElement("h1",null,"Game finished!"),this.showPlayersInfo(),r.a.createElement("span",{className:"start-btn",onClick:function(){return e.props.history.push("/react-trivia/")}},"Lobby")):r.a.createElement("div",{className:"game"},this.showPlayersInfo()," ",this.showTriviaCard()):r.a.createElement("div",{className:"game-preview"},r.a.createElement("div",{className:"game-info"},r.a.createElement("h3",null,r.a.createElement("span",null,"Game:")," \xa0",this.state.params.gameId),r.a.createElement("h3",null,r.a.createElement("span",null,"Password:")," \xa0",this.state.params.gamePassword)),this.state.usersData?this.showPlayersName():null,this.state.params.username===this.state.triviaObject.host?r.a.createElement("span",{className:"start-btn",onClick:this.startGame},"Start"):r.a.createElement("h1",null,"Waiting for ",this.state.triviaObject.host," to start the game"))}}]),a}(r.a.Component);a(48);var T=function(){return r.a.createElement(c.a,null,r.a.createElement(l,null),r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/react-trivia/",exact:!0},r.a.createElement(o.a,{to:"/react-trivia/lobby"})),r.a.createElement(o.b,{path:"/react-trivia/lobby",component:k}),r.a.createElement(o.b,{path:"/react-trivia/game/:username/:gameId/:gamePassword?",component:I})),r.a.createElement(h,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var R=a(117),M=a(118),Q=a(64),B=a(62),F=a.n(B),q=a(63),z=a.n(q),J=Object(Q.a)({palette:{type:"dark",primary:F.a,secondary:z.a},status:{danger:"red"},typography:{fontFamily:["font-family: 'Indie Flower', cursive"]}});i.a.render(r.a.createElement(R.a,{theme:J},r.a.createElement(M.a,null,r.a.createElement(T,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[70,1,2]]]);
//# sourceMappingURL=main.7b1211be.chunk.js.map